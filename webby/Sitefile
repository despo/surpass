task :screenshots do
  require "tasks/screenshots"
end

task :default => :pdf

desc "Rename generated file with Surpass version number."
task :copy do
  require "surpass"
  surpass_manual_filename = "surpass-manual-#{Surpass::VERSION.gsub(".", "-")}.pdf"
  `mv output/surpass-manual.pdf output/#{surpass_manual_filename}`
  `cp output/#{surpass_manual_filename} ..`
end

task :rsync => [:pdf, :copy] do
  system "rsync -v -r --delete --exclude-from=rsync-exclude output/ ananelson@rubyforge.org:/var/www/gforge-projects/surpass/"
end

task :generate_source do
  `rm -r content/source`
  `mkdir content/source`
  `ls ../lib/*.rb`.chomp.split.each do |n|
    File.open("content/source/#{File.basename(n, '.rb')}.txt", "w") do |f|
      f.write %{---
title:  #{File.basename(n)}
layout:  web
filter:
  - erb
  - idio
---
<%= idio("/Users/ana/work/surpass/lib/#{File.basename(n)}") %>
}
    end
  end
end
